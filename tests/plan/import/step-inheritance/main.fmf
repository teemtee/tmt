# Common configuration defined at the top level (root)
plan:
    import:
        url: https://github.com/teemtee/tests
        name: /plans/remote
        # Default for most tests in this group
        inherit-context: false
        inherit-environment: false

# Child plans inherit the configuration above
/discover-append:
    summary: Test discover step inheritance in append mode
    # Use '+' to merge into the inherited 'plan' -> 'import' structure
    plan+:
        import+:
            adjust-plans:
              - discover+:
                    how: shell
                    test: echo "Additional test from local plan"

/discover-replace:
    summary: Test discover step inheritance in replace mode
    plan+:
        import+:
            adjust-plans:
              - discover:
                    how: shell
                    test: echo "Replacement test from local plan"

/multiple-adjust:
    summary: Test multiple adjust fields
    plan+:
        import+:
            adjust-plans:
              - finish+:
                    name: local-additional-finish
                    how: shell
                    script: echo "Local finish"
              - report:
                    how: junit
                    file: /tmp/local-finish.xml

/conditional-adjust:
    summary: Test conditional adjust-plans with when/because clauses
    context:
        arch: x86_64
        distro: fedora
    plan+:
        import+:
            # Override the inherited setting for this specific plan
            inherit-context: true
            adjust-plans:
              - report+:
                    how: junit
                    file: /tmp/conditional-results.xml
                when: distro == fedora
                because: Fedora supports JUnit reporting
