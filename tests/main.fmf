test: ./test.sh
framework: beakerlib
contact: Petr Šplíchal <psplicha@redhat.com>
tier: 2
require: [tmt]
check: [avc]
duration: 10m
environment:
    TMT_FEELING_SAFE: 1

adjust:
  - check: []
    when: distro == centos-stream
    because:
        fresh container-selinux packages are not yet available for centos-stream
        https://gitlab.com/redhat/centos-stream/rpms/container-selinux/-/merge_requests/149
        https://gitlab.com/redhat/centos-stream/rpms/container-selinux/-/merge_requests/148

  - check: []
    when: initiator is not defined or initiator != packit
    because:
        we don't want to run the avc check for local testing as it
        needs root and we're executing tests under a regular user
